var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(r,s){function o(t){try{c(n.next(t))}catch(e){s(e)}}function a(t){try{c(n["throw"](t))}catch(e){s(e)}}function c(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(o,a)}c((n=n.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(r)throw new TypeError("Generator is already executing.");for(;c;)try{if(r=1,s&&(o=s[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(s,i[1])).done)return o;switch(s=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,s=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(o=c.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(n){i=[6,n],s=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,s,o,a,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},Hit=function(t){function e(){var e=t.call(this)||this;return e._touchStatus=!1,e._distance=new egret.Point,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){egret.lifecycle.addLifecycleListener(function(t){t.onUpdate=function(){}}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()},this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.loadResource()];case 1:return t.sent(),this.createGameScene(),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),t=new LoadingUI,this.stage.addChild(t),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,RES.loadGroup("preload",0,t)];case 2:return i.sent(),this.stage.removeChild(t),[3,4];case 3:return e=i.sent(),console.error(e),[3,4];case 4:return[2]}})})},e.prototype.createGameScene=function(){this.drawMsg();var t=new egret.Shape;t.graphics.beginFill(255),t.graphics.drawCircle(100,100,50),t.graphics.endFill(),t.x=100,t.y=100,t.touchEnabled=!0;var e=new egret.Sprite;e.graphics.beginFill(16711680),e.graphics.drawRect(0,0,150,150),e.graphics.endFill(),e.width=150,e.height=150,e.x=60,e.y=200,e.touchEnabled=!0;var i=this.createBitmapByName("egret_icon_png");i.x=350,i.y=50,i.touchEnabled=!0,this.addChild(i),this._head=i;var n=this.createBitmapByName("timg_png");n.x=35,n.y=30,n.touchEnabled=!0,this.addChild(n),this._timg=n,i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.pressDown,this),i.addEventListener(egret.TouchEvent.TOUCH_END,this.pressUp,this),n.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.pressDown,this),n.addEventListener(egret.TouchEvent.TOUCH_END,this.pressUp,this)},e.prototype.drawMsg=function(){this.msgText=new egret.TextField,this.msgText.text="准备检测",this.msgText.textColor=65280,this.msgText.verticalAlign="middle",this.msgText.textAlign="center",this.msgText.width=this.stage.stageWidth,this.msgText.height=this.stage.stageHeight,this.addChild(this.msgText)},e.prototype.pressDown=function(t){this._aciveShape=t.target,this._touchStatus=!0,this._distance.x=t.stageX-this._aciveShape.x,this._distance.y=t.stageY-this._aciveShape.y,this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.pressMove,this)},e.prototype.pressMove=function(t){if(this._touchStatus){this._aciveShape.x=t.stageX-this._distance.x,this._aciveShape.y=t.stageY-this._distance.y;var e=collision.checkCollision(this._head,this._timg,!0);if(e)if(this._aciveShape.hashCode===this._head.hashCode){var i=egret.Tween.get(this._timg);i.to({x:this._timg.x-150},100)}else{var i=egret.Tween.get(this._head);i.to({x:this._head.x+150},100)}this.msgText.text="怒晴鸡大战小白鹭 "+e}},e.prototype.pressUp=function(t){this._touchStatus=!1,this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.pressMove,this)},e.prototype.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e}(egret.DisplayObjectContainer);__reflect(Hit.prototype,"Hit");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.onProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var Main=function(t){function e(){var e=t.call(this)||this;return e._touchStatus=!1,e._distance=new egret.Point,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){egret.lifecycle.addLifecycleListener(function(t){t.onUpdate=function(){}}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()},this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return[4,this.loadResource()];case 1:return e.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return t=e.sent(),this.startAnimation(t),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),t=new LoadingUI,this.stage.addChild(t),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,RES.loadGroup("preload",0,t)];case 2:return i.sent(),this.stage.removeChild(t),[3,4];case 3:return e=i.sent(),console.error(e),[3,4];case 4:return[2]}})})},e.prototype.createGameScene=function(){var t=this.createBitmapByName("bg_jpg");this.addChild(t);var e=this.stage.stageWidth,i=this.stage.stageHeight;t.touchEnabled=!0,t.width=e,t.height=i;var n=new egret.Sprite;n.graphics.beginFill(0,.5),n.graphics.drawRect(0,0,e,172),n.graphics.endFill(),n.y=33,n.touchEnabled=!0,this.addChild(n),this._topMask=n;var r=this.createBitmapByName("aa_png");r.width=120,r.height=r.width*(225/291),r.x=35,r.y=30,r.touchEnabled=!0,n.addChild(r);var s=new egret.Shape;s.x=35,s.y=75,s.rotation=-30,s.graphics.beginFill(255),s.graphics.drawCircle(50,50,50),s.graphics.endFill(),n.addChild(s),this.mycircle=s,r.mask=s;var o=new egret.Shape;o.graphics.lineStyle(2,16777215),o.graphics.moveTo(0,0),o.graphics.lineTo(0,117),o.graphics.endFill(),o.x=175,o.y=30,n.addChild(o);var a=new egret.TextField;a.textColor=16773120,a.width=e-172,a.textAlign="center",a.text="Hello WALI",a.size=24,a.x=172,a.y=50,n.addChild(a);var c=new egret.TextField;n.addChild(c),c.alpha=0,c.width=e-172,c.textAlign=egret.HorizontalAlign.CENTER,c.size=24,c.textColor=16777215,c.x=172,c.y=100,this.textfield=c,n.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.mouseDown,this),n.addEventListener(egret.TouchEvent.TOUCH_END,this.mouseUp,this),r.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){n.contains(c)?n.removeChild(c):n.addChild(c)},this),this.getArcProgress()},e.prototype.getArcProgress=function(){function t(t){e.graphics.clear(),e.graphics.lineStyle(2,65280,1),e.graphics.drawArc(80,80,50,0,t*Math.PI/180,!1),e.graphics.endFill()}var e=new egret.Shape,i=0;this._topMask.addChild(e),egret.startTick(function(e){return i+=1,t(i),i%=360,!0},this)},e.prototype.mouseDown=function(t){console.log("Mouse Down."),this._touchStatus=!0,this._distance.x=t.stageX-this._topMask.x,this._distance.y=t.stageY-this._topMask.y,this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.mouseMove,this)},e.prototype.mouseMove=function(t){this._touchStatus&&(console.log("moving now ! Mouse: [X:"+t.stageX+",Y:"+t.stageY+"]"),this._topMask.x=t.stageX-this._distance.x,this._topMask.y=t.stageY-this._distance.y)},e.prototype.mouseUp=function(t){console.log("Mouse Up."),this._touchStatus=!1,this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.mouseMove,this)},e.prototype.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e.prototype.startAnimation=function(t){var e=this,i=this.mycircle,n=0,r=function(){n>360?n=0:n++,i.rotation=n;var t=egret.Tween.get(i);t.wait(10),t.call(r,e)};r();var s=new egret.HtmlTextParser,o=t.map(function(t){return s.parse(t)}),a=this.textfield,c=-1,h=function(){c++,c>=o.length&&(c=0);var t=o[c];a.textFlow=t;var i=egret.Tween.get(a);i.to({alpha:1},200),i.wait(2e3),i.to({alpha:0},200),i.call(h,e)};h()},e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);